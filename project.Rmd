---
title: "Project"
output:
  html_document:
    toc: true
    toc_float: true
---


```{r setup, include=FALSE}
# 加载所有要用的包
library(devtools)
library(tidyverse)
library(readr)
library(readxl)
library(haven)
library(survey)
library(MEPS)

# 读 2023 MEPS
# 2023 Full-Year Consolidated（HC-251）
## 人水平费用 + 人口学 + 抽样设计变量
fyc23  <- read_MEPS(file = "h251")
cond23 <- read_MEPS(file = "h249")

## 读入 2023 Medical Conditions（HC-249）
## 疾病 / CCSR
names(fyc23)  <- tolower(names(fyc23))
names(cond23) <- tolower(names(cond23))

des23 <- svydesign(
  ids    = ~varpsu,
  strata = ~varstr,
  weights= ~perwt23f,
  data   = fyc23,
  nest   = TRUE
)
```


```{r}
# 这个 chunk 只在 Console 手动跑一次就好，不要在 knit 的时候自动跑
# devtools::install_github("e-mitchell/meps_r_pkg/MEPS")
# library(MEPS)
```


```{r}
## 快速检查一下总费用变量（已经变成小写 totexp23）一致
summary(fyc23$totexp23)
names(fyc23)[1:30]              # 看看前几个变量名是否正确
grep("23", names(fyc23), value = TRUE)[1:20]
nrow(fyc23) 
```


